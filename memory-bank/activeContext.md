# アクティブコンテキスト

## 現在の作業内容

- **列名による日付列選択機能の実装:**
  - CSVファイル読み込み後、ヘッダー行から取得した列名をドロップダウンリストで選択できるようにUIとロジックを変更。列番号指定は廃止。
- **内部処理の効率化:**
  - `src/main.ts`
    を修正し、ファイル選択時に解析したCSVデータを保持し、処理実行時に再利用するように変更。ファイル読み込み/解析の二重実行を解消。
- **関連ファイルの更新:**
  - `index.html`: 列番号入力欄を列名選択ドロップダウンに置き換え。
  - `src/domHandler.ts`: 新しいドロップダウン要素の参照と関連関数を追加。
  - `src/main.ts`: 上記の列名選択ロジックと効率化を実装。
  - `README.md`: 使い方の説明を列名選択方式に更新し、内部効率化についても追記。
  - `docs/feature-plan-column-select.md`: 機能強化計画を記録。
- **フィーチャーブランチ:** `feature/select-column-by-name` で作業中。

## 最近の変更

- **内部処理の効率化:** `src/main.ts` でファイル読み込み/解析の二重実行を解消。
- **`README.md` 更新:** 内部効率化について追記。
- **列名による日付列選択機能の実装:** 上記「現在の作業内容」に詳細を記載。
- **CSVファイルのドラッグ＆ドロップ機能を追加しました。**
- **ファイル選択/ドロップ時の即時処理を停止し、ボタンクリックで処理を開始するように修正しました。**
- **選択されたファイル名を表示する機能を追加しました。**
- (以前の変更) 展開行数上限の挙動変更とデフォルト値変更を実装しました。
- (以前の変更) エラー表示のUI詳細化を実装しました。
- (以前の変更)
  CSVエンコーディング自動検出機能（UTF-8/Shift_JIS）を実装しました。
- (以前の変更) プロジェクトのリファクタリング作業。
- (以前の変更) TypeScriptとDenoの導入とコードのモジュール化。
- (以前の変更) CSSのプレーンCSSへの移行とインライン化。
- (以前の変更) 単一HTML生成ビルドスクリプト (`build.ts`) の作成。

## 次のステップ

- 現在のタスク（列名選択機能実装と効率化）は完了しました。
- このMemory Bank更新後、変更内容を `feature/select-column-by-name`
  ブランチにコミットします。
- ユーザーからのフィードバックや新たな要件に基づいて、次の作業を決定します。
  - 候補: TypeScriptモジュールに対する単体テストの追加 (`deno test`)。
  - より堅牢なCSV解析ライブラリの導入検討。
  - 重複する列名を持つCSVファイルの取り扱いに関する検討。
