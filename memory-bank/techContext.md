# テクニカルコンテキスト

## 使用技術

- **言語:** TypeScript
- **ランタイム/ビルドツール:** Deno
- **フロントエンド (実行時):**
  - HTML5
  - CSS3 (プレーンCSS、ビルド時にインライン化)
  - JavaScript (ES Modules、TypeScriptからビルド)

## 開発セットアップ

- **必須:** Deno ランタイム (v1.x or v2.x)
  がインストールされている必要があります。
- **開発:**
  - ソースコード (`src/` ディレクトリ内の `.ts` および `.css` ファイル)
    を編集します。
  - Denoの組み込みツール (`deno fmt`, `deno lint`)
    を使用してコードのフォーマットとリントを行います。
  - (将来的に) `deno test` を使用して単体テストを実行します。
- **ビルド:** プロジェクトルートで
  `deno run --allow-read --allow-write --allow-net --allow-env build.ts`
  を実行し、`csv_date_expander.html` を生成します。
- **実行:** 生成された `csv_date_expander.html`
  を任意のモダンなWebブラウザで開きます。

## 技術的な制約と考慮事項

- **ブラウザ互換性:** ビルドされたHTMLファイルは、主にモダンブラウザ（Chrome,
  Firefox,
  Edgeなど）を対象としています。古いブラウザでは一部機能が動作しない可能性があります。
- **Deno依存:** 開発とビルドにはDenoが必要です。
- **パフォーマンスとメモリ:**
  大規模なCSVファイル（数万行以上）を処理する場合、ブラウザのJavaScriptエンジンの性能や利用可能なメモリ量に依存するため、処理速度の低下やメモリ不足が発生する可能性があります
  (これはリファクタリング前と同様)。
- **CSV解析の堅牢性:** 実装されているCSVパーサー (`src/csvParser.ts`)
  は基本的なケースに対応します。複雑なエスケープを含むCSVでは問題が発生する可能性があります。
- **日付解析の制限:** "M月D日"
  形式の日付は、ツール実行時の現在の年として解釈されます。年をまたぐ期間を正確に処理するには、入力CSVで
  "YYYY/MM/DD" 形式を使用する必要があります。また、JavaScriptの `Date`
  オブジェクトの解析能力に依存するため、予期しない形式の日付は解析できない場合があります。
- **セキュリティ:**
  全てクライアントサイドで実行されるため、サーバーサイドでのセキュリティリスクはありませんが、ユーザーは信頼できるソースから取得したCSVファイルのみを処理に使用すべきです。
- **エンコーディング検出の限界:** 自動検出は UTF-8 (BOMあり/なし) と Shift_JIS
  を対象としていますが、他のエンコーディング（例:
  EUC-JP）には対応していません。また、ファイルの内容によっては誤判定する可能性もゼロではありません。

## 開発規約

- **コミットメッセージ:** コミットメッセージは Conventional Commits
  仕様に従うこと。
